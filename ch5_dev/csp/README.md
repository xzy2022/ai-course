# CSP 基本概念与形式化定义

## CSP 形式化定义

一个约束满足问题（CSP）可以形式化地定义为一个三元组：

```
CSP = (X, D, C)
```

### 1. 变量集合 X

X 是一个变量的有限集合：
```
X = {x₁, x₂, ..., xₙ}
```

这里的 xᵢ 代表问题中的一个变量（例如，地图着色问题中的"西澳大利亚州"）。

### 2. 值域集合 D

D 是一个值域集合：
```
D = {D₁, D₂, ..., Dₙ}
```

它是一个从变量 X 到其对应值域的映射：
```
D: X → P(V)
```

其中 V 是所有可能取值的全集，P(V) 是 V 的幂集。

对于每一个变量 xᵢ ∈ X，都有一个非空的值域 Dᵢ ∈ D，Dᵢ 包含了变量 xᵢ 所有可能的取值。

**变量域的类型：**
- Dᵢ 可以是离散或连续的
- Dᵢ 可以是有限或无限的
- 目前我们聚焦于离散有限域

### 3. 约束集合 C

C 是一个约束的有限集合：
```
C = {c₁, c₂, ..., cₘ}
```

每个约束 cⱼ ∈ C 都是一个二元组 <Sⱼ, Rⱼ>：

#### 作用域 Sⱼ
Sⱼ 是约束的作用域：Sⱼ ⊆ X，是 X 的一个子集，包含了该约束所涉及的所有变量。

- 如果 |Sⱼ| = 1，则 cⱼ 是一元约束
- 如果 |Sⱼ| = 2，则 cⱼ 是二元约束
- 如果 |Sⱼ| ≥ 3，则 cⱼ 是高阶约束

#### 关系 Rⱼ
Rⱼ 是约束的关系：Rⱼ ⊆ ×_{xᵢ ∈ Sⱼ} Dᵢ

它是作用域 Sⱼ 中所有变量值域的笛卡尔积的一个子集。Rⱼ 定义了哪些变量值的组合是满足该约束的。

## 文件结构

- `csp_core.py`: CSP 核心类的实现
- `README.md`: 本文档，包含形式化定义和说明